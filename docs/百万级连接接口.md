
## 百万级连接

开启百万级连接的程序在后端服务器开启之时运行即可，不需要调用接口

拓扑中6个实体机，每个实体机用docker开一个容器执行server程序，同时用开启多个docker容器开启client程序。每个client 程序都与非本机的5个server 程序建立总5万个连接（每个server各一万）。

为方便管理，所有的docker容器命名如下：


| 机器号  | server | client (不同机器开启的容器数量不尽相同) |
| ------- | ------ | --------------------------------------- |
| 161/162 | h162s1 | h162c1，h162c2，h162c3，h162c4          |
| 163/164 | h164s1 | h164c1，h164c2，h164c3，h164c4          |
| 165/166 | h166s1 | h166c1，h166c2，h166c3，h166c4          |
| 167/168 | h168s1 | h168c1，h168c2，h168c3，h168c4          |
| 171/172 | h172s1 | h172c1，h172c2                          |
| 173/174 | h174s1 | h174c1，h174c2                          |


所有 docker 容器都连接两个网络，192网段的控制网 `ctrlNet`，10网段的数据网 `dataNet`：

所有的docker容器的控制网 `ctrlNet ` IP地址配置如下：

| 机器号  | server ip       | client ip                                                    |
| ------- | --------------- | ------------------------------------------------------------ |
| 161/162 | 192.168.199.200 | 192.168.199.201，192.168.199.202，192.168.199.203，192.168.199.204 |
| 163/164 | 192.168.199.205 | 192.168.199.206，192.168.199.207，192.168.199.208，92.168.199.209 |
| 165/166 | 192.168.199.210 | 192.168.199.211，192.168.199.212，192.168.199.213，192.168.199.214 |
| 167/168 | 192.168.199.215 | 192.168.199.216，192.168.199.217，192.168.199.218，192.168.199.219 |
| 171/172 | 192.168.199.220 | 192.168.199.221，192.168.199.222                             |
| 173/174 | 192.168.199.223 | 192.168.199.224，192.168.199.225                             |

所有的docker容器的数据网 `dataNet` IP地址配置如下：

| 机器号  | server ip      | client ip                                                    |
| ------- | -------------- | ------------------------------------------------------------ |
| 161/162 | 10.162.162.200 | 10.162.162.201，10.162.162.202，10.162.162.203，10.162.162.204 |
| 163/164 | 10.164.164.200 | 10.164.164.201，10.164.164.202，10.164.164.203，10.164.164.204 |
| 165/166 | 10.166.166.200 | 10.166.166.201，10.166.166.202，10.166.166.203，10.166.166.204 |
| 167/168 | 10.168.168.200 | 10.168.168.201，10.168.168.202，10.168.168.203，10.168.168.204 |
| 171/172 | 10.172.172.200 | 10.172.172.201，10.172.172.202                               |
| 173/174 | 10.174.174.200 | 10.174.174.201，10.174.174.202                               |

所有的docker容器的数据网 `dataNet` 中的网卡需要配置MAC地址，如下：

| 机器号  | server mac        | client mac                                                   |
| ------- | ----------------- | ------------------------------------------------------------ |
| 161/162 | 08:00:01:62:02:00 | 08:00:01:62:02:01，08:00:01:62:02:02，08:00:01:62:02:03，08:00:01:62:02:04 |
| 163/164 | 08:00:01:64:02:00 | 08:00:01:64:02:01，08:00:01:64:02:02，08:00:01:64:02:03，08:00:01:64:02:04 |
| 165/166 | 08:00:01:66:02:00 | 08:00:01:66:02:01，08:00:01:66:02:02，08:00:01:66:02:03，08:00:01:66:02:04 |
| 167/168 | 08:00:01:68:02:00 | 08:00:01:68:02:01，08:00:01:68:02:02，08:00:01:68:02:03，08:00:01:68:02:04 |
| 171/172 | 08:00:01:72:02:00 | 08:00:01:72:02:01，08:00:01:72:02:02                         |
| 173/174 | 08:00:01:74:02:00 | 08:00:01:74:02:01，08:00:01:74:02:02                         |


## 前端

点击按钮，调用接口

## 后端

> 以下请求全用GET 即可

URL：`[server_ip]:[server_port]/StartFileReq`

- 功能：开启服务端的响应客户端的文件请求的功能

- 输入：无

- 输出：

``` json
{
    "err": 遇到的任何错误，如果没有错误则此值为 ""
}
```

URL：`[client_ip]:[client_port]/StartFileReq?amount=`

- 功能：开启客户端进行文件请求的功能
- 输入：amount写入你希望此client程序 开启文件请求功能的客户端数量
- 输出：


``` json
{
    "err": 遇到的任何错误，如果没有错误则此值为 ""
}
```

URL：`[server_ip]:[server_port]/StopFileReq`

- 功能：关闭服务端的响应客户端的文件请求的功能
- 输入：无
- 输出：


``` json
{
    "err": 遇到的任何错误，如果没有错误则此值为 ""
}
```

URL：`[client_ip]:[client_port]/StopFileReq`

- 功能：关闭客户端的文件请求的功能
- 输入：无
- 输出：


``` json
{
    "err": 遇到的任何错误，如果没有错误则此值为 ""
}
```

URL：`[client_ip]:[client_port]/queryAmountOfConns`

- 功能：向客户端查询总连接数量和活跃连接数量

- 输入：无

- 输出：

``` json
{
	"hostTerminal":  该客户端程序所在实体机编号
	"amountOfConns": 该客户端程序总连接数
    "amountOfFileReqConns": 该客户端总活跃连接数
}
```
