from p4utils.mininetlib.network_API import NetworkAPI
import json
net = NetworkAPI()

# Network general options
net.setLogLevel('info')

# Network definition
#------------------------------------------
net.addHost('h162')
net.addHost('h164')
net.addHost('h166')
net.addHost('h168')
net.addHost('h170')
net.addHost('h172')
net.addHost('h174')
net.addHost('h180')
#------------------------------------------
net.addP4Switch('s176')
net.setP4Source('s176', 'int_multipath_eccn.p4')
net.setP4CliInput('s176', 's176-commands.txt')

net.addP4Switch('s178')
net.setP4Source('s178', 'int_multipath_eccn.p4')
net.setP4CliInput('s178', 's178-commands.txt')

net.addP4Switch('s182')
net.setP4Source('s182', 'int_multipath_eccn.p4')
net.setP4CliInput('s182', 's182-commands.txt')

net.addP4Switch('s184')
net.setP4Source('s184', 'int_multipath_eccn.p4')
net.setP4CliInput('s184', 's184-commands.txt')

net.addP4Switch('s186')
net.setP4Source('s186', 'int_multipath_eccn.p4')
net.setP4CliInput('s186', 's186-commands.txt')

net.addP4Switch('s188')
net.setP4Source('s188', 'int_multipath_eccn.p4')
net.setP4CliInput('s188', 's188-commands.txt')
#------------------------------------------
#net.addLink('h162', 's182', 0, 1, None, intfName1='', intfName2='', addr1='', addr2='')
net.addLink('h162', 's182', 0, 1, None)
net.addLink('h164', 's184', 0, 1, None)
net.addLink('h166', 's186', 0, 1, None)
net.addLink('h168', 's188', 0, 1, None)
net.addLink('h170', 's176', 0, 4, None)
net.addLink('h172', 's176', 0, 1, None)
net.addLink('h174', 's178', 0, 1, None)
net.addLink('s176', 's182', 2, 5, None)
net.addLink('s176', 's186', 3, 2, None)
net.addLink('s178', 'h180', 2, 0, None)
net.addLink('s178', 's184', 4, 2, None)
net.addLink('s178', 's188', 3, 5, None)
net.addLink('s182', 's184', 2, 5, None)
net.addLink('s182', 's186', 4, 3, None)
net.addLink('s182', 's188', 3, 3, None)
net.addLink('s184', 's186', 4, 4, None)
net.addLink('s184', 's188', 3, 4, None)
net.addLink('s186', 's188', 5, 2, None)
#------------------------------------------
net.setIntfMac('h162', 's182', 'e8:61:1f:37:b6:d3')
net.setIntfMac('s182', 'h162', 'd0:36:9f:ed:55:63')
net.setIntfMac('h164', 's184', 'e8:61:1f:38:04:aa')
net.setIntfMac('s184', 'h164', 'a0:36:9f:d9:3b:1b')
net.setIntfMac('h166', 's186', 'e8:61:1f:37:b4:db')
net.setIntfMac('s186', 'h166', 'a0:36:9f:aa:44:bb')
net.setIntfMac('h168', 's188', 'e8:61:1f:37:b6:71')
net.setIntfMac('s188', 'h168', 'a0:36:9f:aa:44:93')
net.setIntfMac('h170', 's176', 'e8:61:1f:37:b6:83')
net.setIntfMac('s176', 'h170', 'a0:36:9f:08:d1:28')
net.setIntfMac('h172', 's176', 'e8:61:1f:37:b5:f7')
net.setIntfMac('s176', 'h172', 'a0:36:9f:08:d1:29')
net.setIntfMac('h174', 's178', 'e8:61:1f:37:b6:8f')
net.setIntfMac('s178', 'h174', 'a0:36:9f:08:c7:b4')
net.setIntfMac('s176', 's182', 'a0:36:9f:08:d1:2b')
net.setIntfMac('s182', 's176', 'd0:36:9f:ed:5c:63')
net.setIntfMac('s176', 's186', 'a0:36:9f:08:d1:2a')
net.setIntfMac('s186', 's176', 'a0:36:9f:a8:5c:bb')
net.setIntfMac('s178', 'h180', 'a0:36:9f:08:c7:b5')
net.setIntfMac('h180', 's178', 'e8:61:1f:37:b5:8b')
net.setIntfMac('s178', 's184', 'a0:36:9f:08:c7:b7')
net.setIntfMac('s184', 's178', 'a0:36:9f:d9:3a:e7')
net.setIntfMac('s178', 's188', 'a0:36:9f:08:c7:b6')
net.setIntfMac('s188', 's178', 'a0:36:9f:d9:3b:83')
net.setIntfMac('s182', 's184', 'd0:36:9f:ed:5c:60')
net.setIntfMac('s184', 's182', 'a0:36:9f:d9:3b:18')
net.setIntfMac('s182', 's186', 'd0:36:9f:ed:5c:61')
net.setIntfMac('s186', 's182', 'a0:36:9f:a8:5c:b9')
net.setIntfMac('s182', 's188', 'd0:36:9f:ed:5c:62')
net.setIntfMac('s188', 's182', 'a0:36:9f:d9:3b:82')
net.setIntfMac('s184', 's186', 'a0:36:9f:d9:3a:e6')
net.setIntfMac('s186', 's184', 'a0:36:9f:a8:5c:ba')
net.setIntfMac('s184', 's188', 'a0:36:9f:d9:3b:19')
net.setIntfMac('s188', 's184', 'a0:36:9f:d9:3b:81')
net.setIntfMac('s186', 's188', 'a0:36:9f:a8:5c:b8')
net.setIntfMac('s188', 's186', 'a0:36:9f:d9:3b:80')
#------------------------------------------
net.setIntfIp('h162', 's182', '10.162.162.2/24')
net.setIntfIp('h164', 's184', '10.164.164.2/24')
net.setIntfIp('h166', 's186', '10.166.166.2/24')
net.setIntfIp('h168', 's188', '10.168.168.2/24')
net.setIntfIp('h170', 's176', '10.170.170.2/24')
net.setIntfIp('h172', 's176', '10.172.172.2/24')
net.setIntfIp('h174', 's178', '10.174.174.2/24')
net.setIntfIp('h180', 's178', '10.180.180.2/24')
#------------------------------------------
net.setDefaultRoute('h162', '10.162.162.1')
net.setDefaultRoute('h164', '10.164.164.1')
net.setDefaultRoute('h166', '10.166.166.1')
net.setDefaultRoute('h168', '10.168.168.1')
net.setDefaultRoute('h170', '10.170.170.1')
net.setDefaultRoute('h172', '10.172.172.1')
net.setDefaultRoute('h174', '10.174.174.1')
net.setDefaultRoute('h180', '10.180.180.1')
#------------------------------------------
# Assignment predefined strategy
#net.mixed()

# Nodes general options
net.enablePcapDumpAll()
net.enableLogAll()

# Start network
net.enableCli()
net.startNetwork()
