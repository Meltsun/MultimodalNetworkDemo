#!/bin/bash

# 定义目标机器的IP地址和端口号
declare -A machines
machines=(
    ["192.168.199.186"]=22
    ["192.168.199.176"]=22
    ["192.168.199.182"]=22
    ["192.168.199.184"]=22
    ["192.168.199.178"]=22
    ["192.168.199.188"]=22
    ["192.168.199.166"]=22
    ["192.168.199.170"]=22
    ["192.168.199.172"]=22
    ["192.168.199.162"]=22
    ["192.168.199.164"]=22
    ["192.168.199.174"]=22
    ["192.168.199.180"]=22
    ["192.168.199.168"]=22   
)

# 分发公钥
for ip in "${!machines[@]}"; do
    port=${machines[$ip]}
    ssh-copy-id -i ~/.ssh/id_rsa.pub -p $port sinet@$ip
done
